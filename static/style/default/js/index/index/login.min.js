"use strict";function getPhoneCode(o){var r=$(o);return phone.val()?(phoneError.html(""),code.val()?(codeError.html(""),void $.post("ajax?op=sendcode",{account:deleteSpace(phone.val()),verifycode:deleteSpace(code.val())},function(o){0==o.errno?countdown(r):codeError.html(o.errmsg)},"json")):(codeError.html("请填写图片验证码"),!1)):(phoneError.html("请填写手机号码"),!1)}function reg(o){var r=$(o);return isPhone(phone.val())?(phoneError.html(""),phoneCode.val()?(phoneCodeError.html(""),password.val().length<6?(passwordError.html("请输入密码并且不小于6位"),!1):(passwordError.html(""),r.attr("disabled","disabled").html("正在注册，请稍等。。。"),void $.ajax({url:"ajax?op=register",type:"post",dataType:"json",data:{account:deleteSpace(phone.val()),code:deleteSpace(phoneCode.val()),password:deleteSpace(password.val()),mobilecode:{account:deleteSpace(phone.val()),code:deleteSpace(phoneCode.val())}}}).done(function(o){0==o.errno?(r.html("注册成功，为您跳转到登陆页面"),window.location.href="/user/account/login"):($("p.error[for='all']").html(o.errmsg),r.html("注册").removeAttr("disabled"))}))):(phoneCodeError.html("请输入手机收到的验证码"),!1)):(phoneError.html("请输入正确的手机号码"),!1)}function login(o){var r=$(o),e=0,n=$('input[type="checkbox"]');return n.is(":checked")&&(e=1),isPhone(loginPhone.val())?(loginPhoneError.html(""),loginPassword.val()?(loginPasswordError.html(""),r.attr("disabled","disabled").html("请稍等。。。"),void $.ajax({url:"ajax?op=login",type:"post",dataType:"json",data:{account:deleteSpace(loginPhone.val()),password:deleteSpace(loginPassword.val()),remember:e}}).done(function(o){0==o.errno?(r.html("登录成功，正在跳转。。。"),window.location.href="/index/index"):(loginPhoneError.html(o.errmsg),r.html("登录").removeAttr("disabled"))})):(loginPasswordError.html("请输入密码"),!1)):(loginPhoneError.html("请输入正确的手机号码"),!1)}function getForgetPhoneCode(o){var r=$(o);return isPhone(forgetPhone.val())?(forgetPhoneError.html(""),forgetCode.val()?(forgetCodeError.html(""),void $.post("ajax?op=forgetsendcode",{account:deleteSpace(forgetPhone.val()),verifycode:deleteSpace(forgetCode.val())},function(o){0==o.errno?countdown(r):forgetCodeError.html(o.errmsg)},"json")):(forgetCodeError.html("请填写图片验证码"),!1)):(forgetPhoneError.html("请填写正确的手机号码"),!1)}function forget(o){var r=$(o);return isPhone(forgetPhone.val())?(forgetPhoneError.html(""),forgetPhoneCode.val()?(forgetPhoneCodeError.html(""),forgetPassword.val().length<6?(forgetPasswordError.html("请输入密码并且不小于6位"),!1):(forgetPasswordError.html(""),r.attr("disabled","disabled").html("正在提交，请稍等。。。"),void $.ajax({url:"ajax?op=forget",type:"post",dataType:"json",data:{account:deleteSpace(forgetPhone.val()),code:deleteSpace(forgetPhoneCode.val()),password:deleteSpace(forgetPassword.val()),mobilecode:{account:deleteSpace(forgetPhone.val()),code:deleteSpace(forgetPhoneCode.val())}}}).done(function(o){0==o.errno?(r.html("找回成功，为您跳转到登陆页面"),window.location.href="/user/account/login"):($("p.error[for='all']").html(o.errmsg),r.html("确认提交").removeAttr("disabled"))}))):(forgetPhoneCodeError.html("请输入手机收到的验证码"),!1)):(forgetPhoneError.html("请输入正确的手机号码"),!1)}function isPhone(o){var r=/^1[0-9]{10}$/;return r.exec(o)?!0:!1}function deleteSpace(o){return void 0==o?"":o.replace(/(^\s*)|(\s*$)/g,"")}function countdown(o){var r=o,e=60;r.attr("disabled","disabled").html("短信已发送（60）");var n=setInterval(function(){return e--,e>0?void r.html("短信已发送（"+e+"）"):(clearInterval(n),void r.removeAttr("disabled","disabled").html("获取动态密码"))},1e3)}var loginBg=$(".login_bg"),h=$(window).height()-72;loginBg.height(h),$(window).resize(function(){h=$(window).height()-72,loginBg.height(h)});var regFrom=$("#regForm"),phone=regFrom.find("#phone"),code=regFrom.find("#code"),phoneCode=regFrom.find("#phoneCode"),password=regFrom.find("#password"),phoneError=$("p.error[for='phone']"),codeError=$("p.error[for='code']"),phoneCodeError=$("p.error[for='phoneCode']"),passwordError=$("p.error[for='password']");phone.on("blur",function(){var o=$(this);return isPhone(o.val())?(phoneError.html(""),void $.post("ajax?op=hasaccount",{account:o.val()},function(o){0!=o.errno&&phoneError.html(o.errmsg)},"json")):(phoneError.html("请输入正确的手机号码"),!1)});var loginPhone=$("#loginForm #phone"),loginPassword=$("#loginForm #password"),regFrom=$("#regForm"),loginPhoneError=$("p.error[for='phone']"),loginPasswordError=$("p.error[for='password']"),regFrom=$("#forgetForm"),forgetPhone=regFrom.find("#phone"),forgetCode=regFrom.find("#code"),forgetPhoneCode=regFrom.find("#phoneCode"),forgetPassword=regFrom.find("#password"),forgetPhoneError=$("p.error[for='phone']"),forgetCodeError=$("p.error[for='code']"),forgetPhoneCodeError=$("p.error[for='phoneCode']"),forgetPasswordError=$("p.error[for='password']");
